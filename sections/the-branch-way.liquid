<style>
    :root{
        --non-active-color: #aba6a6;
        --active-color: #8DC0D2;
    }
    .the-branch-ways__steps-list-item-number {
        background: var(--non-active-color);
        color: white;
        width: max-content;
        text-align: center;
        justify-content: center;
        margin: auto;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 100px;
        line-height: 1;
        margin-bottom: 10px;
    }
    .the-branch-ways__steps-list-item.active .the-branch-ways__steps-list-item-number{
        background: var(--active-color);
    }
    .the-branch-ways__steps-list-item-days {
        padding: 18px 0 10px;
        color:  var(--non-active-color);
        border-bottom: 7px solid transparent;
        text-transform: uppercase;
        font-weight: 600;
        font-size: 1.2em;
    }
    .the-branch-ways__steps-list-item-icon {
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .the-branch-ways__steps-list-item{
        cursor: pointer;
    }
    .the-branch-ways__step-details {
        transition: all 1s ease;
    }
    .the-branch-ways__step-details:not(.active){
        /* display: none; */
        opacity: 0;
        visibility: hidden;
        height: 0;
      transition: all 0s ease;
    }
    .the-branch-ways__steps-list-item-title {
        flex-grow: 1;
        font-size: 1.2em;
        font-weight: 600;
        text-transform: uppercase;
    }
    
    .the-branch-ways__steps-list {
        margin-top: 25px;
    }
    .the-branch-ways__step-detail {
        padding-left: 40px;
    }
    @media(max-width: 900px){
        .shopify-section--the-branch-way .section-heading{
            font-size: 28px;
        }
        .shopify-section--the-branch-way .container-extra-small{
            padding-left: 2.5rem;
            padding-right: 2.5rem;
        }
    }
    @media(max-width: 600px){
        .shopify-section--the-branch-way .section-heading{
            font-size: 24px;
        }
        .shopify-section--the-branch-way .container-extra-small{
            padding-left: 0rem;
            padding-right: 0rem;
        }
    }
    @media(min-width: 601px){
        .the-branch-ways__steps-list-item {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .the-branch-ways__steps-list-item.active .the-branch-ways__steps-list-item-days {
            border-bottom: 7px solid  var(--active-color);
            color:  var(--active-color);
        }
        .the-branch-ways__steps-list{
            margin-bottom: 4em;
            position: relative;
        }
        .the-branch-ways__steps-list::after{
            position: absolute;
            content: '';
            top: auto;
            bottom: 0;
            width: calc(100% - 20px);
            right: 0;
            height: 1px;
            left: auto;
            background-color: var(--non-active-color);;
        }
        .the-branch-ways__steps-list-item-title {
            margin-top: 12px;
            margin-bottom: 7px;
        }
    }
    @media(max-width: 600px){
        .the-branch-ways__steps-list-item {
            display: grid;
            grid-template-columns: 80px 30px 2fr;
            grid-column-gap: 10px;
            text-align: left;
            align-items: self-start;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        .the-branch-ways__steps-list-item-number{
            margin-top: 0;
        }
        .the-branch-ways__steps-list-item.active .the-branch-ways__steps-list-item-days {
            color:  var(--active-color);
        }
        .the-branch-ways__steps-list-item-description{
            transition: all 1s ease ;
            overflow: hidden;
        }
        .the-branch-ways__steps-list-item:not(.active) .the-branch-ways__steps-list-item-description{
            visibility: hidden;
            opacity: 0;
            height: 0;
            transition: all 1s ease ;
            height: 0 !important;
            overflow: hidden;
        }
        .the-branch-ways__steps-list-item-icon{
            align-items: flex-start;
        }
        .the-branch-ways__steps-list{
            flex-direction: column;
            margin-top: 12px;
        }
    }
</style> 

<div class="c-hwt-section" style="background: {{ section.settings.bg_color }};">
    <div class="c-hwt-container container-smaller container-extra-small " >
      {% if section.settings.heading != blank %}
      <h1 class="c-hwt-heading section-heading">{{ section.settings.heading }}</h1>
      {% endif %}

      <div class="the-branch-ways__steps-list grid medium--hide large--hide" >
        {% for block in section.blocks %}
            <div class="grid__item text-center the-branch-ways__steps-list-item {{step_list_item_class}} {% if forloop.index == 1 %} active{% endif %}" data-index = "{{forloop.index}}">
                <div class="the-branch-ways__steps-list-item-icon"> {{block.settings.svg_icon}} </div>
                <div class="the-branch-ways__steps-list-item-number">{{ forloop.index }}</div>
                <div class="">
                    <div class="the-branch-ways__steps-list-item-title">{{ block.settings.title }}</div>
                    <div class="the-branch-ways__steps-list-item-days">{{ block.settings.days }}</div>
                    <div class="the-branch-ways__steps-list-item-description">{{ block.settings.description }}</div>
                </div>
            </div>
        {% endfor %}
      </div>

      {% assign step_list_item_class = "large--three-twelfths medium--three-twelfths small--one-whole" %}

      <div class="the-branch-ways__steps-list grid small--hide" >
        {% for block in section.blocks %}
            <div class="grid__item text-center the-branch-ways__steps-list-item {{step_list_item_class}} {% if forloop.index == 1 %} active{% endif %}" data-index = "{{forloop.index}}">
                <div class="the-branch-ways__steps-list-item-number">{{ forloop.index }}</div>
                <div class="the-branch-ways__steps-list-item-icon"> {{block.settings.svg_icon}} </div>
                <div class="the-branch-ways__steps-list-item-title">{{ block.settings.title }}</div>
                <div class="the-branch-ways__steps-list-item-description medium-down--hide">{{ block.settings.way_description }}</div>
                <div class="the-branch-ways__steps-list-item-days">{{ block.settings.days }}</div>
            </div>
        {% endfor %}
      </div>

      {% assign step_detail__image_classes = "large--five-twelfths medium--five-twelfths" %}
      {% assign step_detail__detail_classes = "large--five-twelfths medium--seven-twelfths" %}

        {% for block in section.blocks %}
            <div class="the-branch-ways__step-details grid small--hide {% if forloop.index == 1 %} active{% endif %}" data-index = "{{forloop.index}}">
                {% if block.settings.way_image != blank %}
                <div class=" grid__item the-branch-ways__step-image {{step_detail__image_classes}} ">
                    <div class="image-wrapper">
                        <img src="{{ block.settings.way_image | img_url: 'x600' }}" loading="lazy"/>
                    </div>
                </div>
                {% endif %}
                <div class=" grid__item the-branch-ways__step-detail {{step_detail__detail_classes}} ">
                    <h3> {{block.settings.heading}} </h3>
                    <div class="rte">
                        {{block.settings.description}} 
                    </div>
                </div>
            </div>
        {% endfor %}

    </div>
  </div>


  <script>
      var selectors = {
          stepListItem : ".the-branch-ways__steps-list-item",
          stepDetails: ".the-branch-ways__step-details",
          stepDescription: ".the-branch-ways__steps-list-item-description"
      }
        var steps = document.querySelectorAll(selectors.stepListItem);
        var stepDetails = document.querySelectorAll(selectors.stepDetails);
        steps.forEach(step => step.addEventListener('click', (e) => {
            steps.forEach(step => step.classList.remove('active'));
            step.classList.add('active');
            stepDetails.forEach(step => step.classList.remove('active'));
            stepDetails[step.dataset.index - 1].classList.add('active');
            if(window.innerWidth <600){
                console.log("Small Windowwww")
                step.querySelector(selectors.stepDescription).style.height = step.querySelector(selectors.stepDescription).scrollHeight + "px";
            }
        }))
  </script>

  {% schema %}
  {
    "name": "The Branch Way - Custom",
   "class": "shopify-section--the-branch-way",
    "settings": [
      {
        "id": "bg_color",
        "type": "color",
        "label": "Bg Color",
        "default": "#F3F0ED"
      },
      {
        "id": "heading",
        "type": "text",
        "label": "Heading",
        "default": "Start building your dream Office."
      }
    ],
    "blocks": [
      {
        "name": "Way",
        "type": "way",
        "settings": [
            {
                "type": "header",
                "content": "Way Header Information"
            },
            {
                "type": "text",
                "id": "svg_icon",
                "label": "SVG Icon"
            },
            {
                "type": "text",
                "id": "title",
                "label": "Way Title",
                "default": "Meet Branch"
            },
            {
                "type": "textarea",
                "id": "way_description",
                "label": "Way Description",
                "default": "Explore out curated line or book a free design consultation"
            },
            {
                "type": "text",
                "id": "days",
                "label": "Days",
                "default": "Days 1-3"
            },
            {
                "type": "image_picker",
                "id": "way_image",
                "label": "Way Image"
            },
            {
                "type": "text",
                "id": "heading",
                "label": "Heading",
                "default": "Get Furnished"
            },
            {
                "type": "richtext",
                "id": "description",
                "label": "Description",
                "default": "<p> We'll outfit your office on your timeline. We'll provide white-glove delivery, build items on site, and isntall them according to your floorplan. Plus, we'll take all of the packaging with us after the installation. </p>"
            }
        ]
      }
    ],
    "presets": [
      {
        "name": "The Branch Way - Custom",
        "category": "Custom"
      }
    ]
    }
  {% endschema %}

  {% stylesheet %}
  {% endstylesheet %}

  {% javascript %}
  {% endjavascript %}